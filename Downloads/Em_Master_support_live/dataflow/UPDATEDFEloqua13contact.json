{
    "name": "UPDATEDFEloqua13contact",
    "properties": {
        "type": "MappingDataFlow",
        "typeProperties": {
            "sources": [
                {
                    "dataset": {
                        "referenceName": "UpdateEl13contact",
                        "type": "DatasetReference"
                    },
                    "name": "source1"
                }
            ],
            "sinks": [
                {
                    "dataset": {
                        "referenceName": "Json14",
                        "type": "DatasetReference"
                    },
                    "name": "sink2"
                }
            ],
            "transformations": [
                {
                    "name": "flatten1"
                }
            ],
            "scriptLines": [
                "parameters{",
                "     Item as string (\"\")",
                "}",
                "source(output(",
                "          body as (count as short, hasMore as boolean, items as (C_Address1 as string, C_Address2 as string, C_Address3 as string, C_Age_Group1 as string, C_Annual_Revenue1 as string, C_BusPhone as string, C_City as string, C_Company as string, C_Company_Revenue1 as integer, C_Company_Size1 as string, C_Company_Website1 as string, C_Confirm_Email_Address1 as string, C_Country as string, C_Country_Code1 as short, C_Country_Code___Business_Phone1 as short, C_DateCreated as string, C_DateModified as string, C_Date_of_Birth1 as string, C_Date_of_Birth_21 as date, C_Designation1 as string, C_Designation_Level1 as string, C_ElqPURLName as string, C_EmailAddressDomain as string, C_EmailDisplayName as string, C_Emirates_ID_or_Passport_Number1 as string, C_Fax as string, C_Field_Merge___Personalization1 as string, C_FirstAndLastName as string, C_FirstName as string, C_Gender1 as string, C_IND_ID1 as integer, C_Industry1 as string, C_Integrated_Marketing_and_Sales_Funnel_Stage as string, C_Job_Function1 as string, C_Job_Role1 as string, C_LS___High_Value_Website_Content1 as string, C_LastMSCRMCampaignResponseID as string, C_LastModifiedByExtIntegrateSystem as string, C_LastName as string, C_Lead_Rating___Combined1 as string, C_Lead_Rating___Explicit1 as string, C_Lead_Rating___Implicit1 as string, C_Lead_Score_Date___Most_Recent1 as string, C_Lead_Score_Date___Profile___Most_Recent1 as string, C_Lead_Score___Explicit1 as string, C_Lead_Score___Implicit1 as string, C_Lead_Score___Last_High_Touch_Event_Date1 as string, C_Lead_Source___Most_Recent1 as string, C_Lead_Source___Original1 as string, C_Lead_Status1 as string, C_LinkedIn_URL1 as string, C_List_Source1 as string, C_MD5HashedBusPhone as string, C_MD5HashedEmailAddress as string, C_MD5HashedMobilePhone as string, C_MSCRMAccountID as string, C_MSCRMContactID as string, C_MSCRMLastCampaignID as string, C_MSCRMLastCampaignName as string, C_MSCRMLastCampaignStatus as string, C_MSCRMLeadID as string, C_MSCRM_EmailOptOut as string, C_MSCRM_LeadRating as short, C_Middle_Name1 as string, C_MobilePhone as string, C_Name_of_publication___radio_station___TV_ch as string, C_Nationality1 as string, C_PAHB_URL1 as string, C_Password1 as string, C_Product_Solution_of_Interest1 as string, C_Promo_Code_11 as string, C_Region1 as string, C_SFDCAccountID as string, C_SFDCContactID as string, C_SFDCLastCampaignID as string, C_SFDCLastCampaignStatus as string, C_SFDCLeadID as string, C_SFDC_EmailOptOut1 as string, C_SHA256HashedBusPhone as string, C_SHA256HashedEmailAddress as string, C_SHA256HashedMobilePhone as string, C_Salesperson as string, C_Salutation as string, C_State_Prov as string, C_Temp_Stand_Hall1 as short, C_Temp_Stand_No1 as string, C_Temp_Stand_Sector1 as string, C_Temp_Stand_Type1 as string, C_Territory as string, C_Title as string, C_URN_Number___Infosalons1 as long, C_Username1 as string, C_Zip_Postal as string, C_elqPURLName1 as string, ContactIDExt as string, Contact_Id as short, EmailAddress as string, EmailFormat as string, IsBounced as boolean, IsSubscribed as boolean)[], limit as short, offset as boolean, totalResults as integer),",
                "          headers as [string,string]",
                "     ),",
                "     allowSchemaDrift: true,",
                "     validateSchema: false,",
                "     httpMethod: 'GET',",
                "     timeout: 30,",
                "     requestInterval: 0,",
                "     paginationRules: ['supportRFC5988' -> 'true'],",
                "     responseFormat: ['type' -> 'json', 'documentForm' -> 'singleDocument']) ~> source1",
                "source1 foldDown(unroll(body.items),",
                "     mapColumn(",
                "          count = body.count,",
                "          hasMore = body.hasMore,",
                "          C_Address1 = body.items.C_Address1,",
                "          C_Address2 = body.items.C_Address2,",
                "          C_Address3 = body.items.C_Address3,",
                "          C_Age_Group1 = body.items.C_Age_Group1,",
                "          C_Annual_Revenue1 = body.items.C_Annual_Revenue1,",
                "          C_BusPhone = body.items.C_BusPhone,",
                "          C_City = body.items.C_City,",
                "          C_Company = body.items.C_Company,",
                "          C_Company_Revenue1 = body.items.C_Company_Revenue1,",
                "          C_Company_Size1 = body.items.C_Company_Size1,",
                "          C_Company_Website1 = body.items.C_Company_Website1,",
                "          C_Confirm_Email_Address1 = body.items.C_Confirm_Email_Address1,",
                "          C_Country = body.items.C_Country,",
                "          C_Country_Code1 = body.items.C_Country_Code1,",
                "          C_Country_Code___Business_Phone1 = body.items.C_Country_Code___Business_Phone1,",
                "          C_DateCreated = body.items.C_DateCreated,",
                "          C_DateModified = body.items.C_DateModified,",
                "          C_Date_of_Birth1 = body.items.C_Date_of_Birth1,",
                "          C_Date_of_Birth_21 = body.items.C_Date_of_Birth_21,",
                "          C_Designation1 = body.items.C_Designation1,",
                "          C_Designation_Level1 = body.items.C_Designation_Level1,",
                "          C_ElqPURLName = body.items.C_ElqPURLName,",
                "          C_EmailAddressDomain = body.items.C_EmailAddressDomain,",
                "          C_EmailDisplayName = body.items.C_EmailDisplayName,",
                "          C_Emirates_ID_or_Passport_Number1 = body.items.C_Emirates_ID_or_Passport_Number1,",
                "          C_Fax = body.items.C_Fax,",
                "          C_Field_Merge___Personalization1 = body.items.C_Field_Merge___Personalization1,",
                "          C_FirstAndLastName = body.items.C_FirstAndLastName,",
                "          C_FirstName = body.items.C_FirstName,",
                "          C_Gender1 = body.items.C_Gender1,",
                "          C_IND_ID1 = body.items.C_IND_ID1,",
                "          C_Industry1 = body.items.C_Industry1,",
                "          C_Integrated_Marketing_and_Sales_Funnel_Stage = body.items.C_Integrated_Marketing_and_Sales_Funnel_Stage,",
                "          C_Job_Function1 = body.items.C_Job_Function1,",
                "          C_Job_Role1 = body.items.C_Job_Role1,",
                "          C_LS___High_Value_Website_Content1 = body.items.C_LS___High_Value_Website_Content1,",
                "          C_LastMSCRMCampaignResponseID = body.items.C_LastMSCRMCampaignResponseID,",
                "          C_LastModifiedByExtIntegrateSystem = body.items.C_LastModifiedByExtIntegrateSystem,",
                "          C_LastName = body.items.C_LastName,",
                "          C_Lead_Rating___Combined1 = body.items.C_Lead_Rating___Combined1,",
                "          C_Lead_Rating___Explicit1 = body.items.C_Lead_Rating___Explicit1,",
                "          C_Lead_Rating___Implicit1 = body.items.C_Lead_Rating___Implicit1,",
                "          C_Lead_Score_Date___Most_Recent1 = body.items.C_Lead_Score_Date___Most_Recent1,",
                "          C_Lead_Score_Date___Profile___Most_Recent1 = body.items.C_Lead_Score_Date___Profile___Most_Recent1,",
                "          C_Lead_Score___Explicit1 = body.items.C_Lead_Score___Explicit1,",
                "          C_Lead_Score___Implicit1 = body.items.C_Lead_Score___Implicit1,",
                "          C_Lead_Score___Last_High_Touch_Event_Date1 = body.items.C_Lead_Score___Last_High_Touch_Event_Date1,",
                "          C_Lead_Source___Most_Recent1 = body.items.C_Lead_Source___Most_Recent1,",
                "          C_Lead_Source___Original1 = body.items.C_Lead_Source___Original1,",
                "          C_Lead_Status1 = body.items.C_Lead_Status1,",
                "          C_LinkedIn_URL1 = body.items.C_LinkedIn_URL1,",
                "          C_List_Source1 = body.items.C_List_Source1,",
                "          C_MD5HashedBusPhone = body.items.C_MD5HashedBusPhone,",
                "          C_MD5HashedEmailAddress = body.items.C_MD5HashedEmailAddress,",
                "          C_MD5HashedMobilePhone = body.items.C_MD5HashedMobilePhone,",
                "          C_MSCRMAccountID = body.items.C_MSCRMAccountID,",
                "          C_MSCRMContactID = body.items.C_MSCRMContactID,",
                "          C_MSCRMLastCampaignID = body.items.C_MSCRMLastCampaignID,",
                "          C_MSCRMLastCampaignName = body.items.C_MSCRMLastCampaignName,",
                "          C_MSCRMLastCampaignStatus = body.items.C_MSCRMLastCampaignStatus,",
                "          C_MSCRMLeadID = body.items.C_MSCRMLeadID,",
                "          C_MSCRM_EmailOptOut = body.items.C_MSCRM_EmailOptOut,",
                "          C_MSCRM_LeadRating = body.items.C_MSCRM_LeadRating,",
                "          C_Middle_Name1 = body.items.C_Middle_Name1,",
                "          C_MobilePhone = body.items.C_MobilePhone,",
                "          C_Name_of_publication___radio_station___TV_ch = body.items.C_Name_of_publication___radio_station___TV_ch,",
                "          C_Nationality1 = body.items.C_Nationality1,",
                "          C_PAHB_URL1 = body.items.C_PAHB_URL1,",
                "          C_Password1 = body.items.C_Password1,",
                "          C_Product_Solution_of_Interest1 = body.items.C_Product_Solution_of_Interest1,",
                "          C_Promo_Code_11 = body.items.C_Promo_Code_11,",
                "          C_Region1 = body.items.C_Region1,",
                "          C_SFDCAccountID = body.items.C_SFDCAccountID,",
                "          C_SFDCContactID = body.items.C_SFDCContactID,",
                "          C_SFDCLastCampaignID = body.items.C_SFDCLastCampaignID,",
                "          C_SFDCLastCampaignStatus = body.items.C_SFDCLastCampaignStatus,",
                "          C_SFDCLeadID = body.items.C_SFDCLeadID,",
                "          C_SFDC_EmailOptOut1 = body.items.C_SFDC_EmailOptOut1,",
                "          C_SHA256HashedBusPhone = body.items.C_SHA256HashedBusPhone,",
                "          C_SHA256HashedEmailAddress = body.items.C_SHA256HashedEmailAddress,",
                "          C_SHA256HashedMobilePhone = body.items.C_SHA256HashedMobilePhone,",
                "          C_Salesperson = body.items.C_Salesperson,",
                "          C_Salutation = body.items.C_Salutation,",
                "          C_State_Prov = body.items.C_State_Prov,",
                "          C_Temp_Stand_Hall1 = body.items.C_Temp_Stand_Hall1,",
                "          C_Temp_Stand_No1 = body.items.C_Temp_Stand_No1,",
                "          C_Temp_Stand_Sector1 = body.items.C_Temp_Stand_Sector1,",
                "          C_Temp_Stand_Type1 = body.items.C_Temp_Stand_Type1,",
                "          C_Territory = body.items.C_Territory,",
                "          C_Title = body.items.C_Title,",
                "          C_URN_Number___Infosalons1 = body.items.C_URN_Number___Infosalons1,",
                "          C_Username1 = body.items.C_Username1,",
                "          C_Zip_Postal = body.items.C_Zip_Postal,",
                "          C_elqPURLName1 = body.items.C_elqPURLName1,",
                "          ContactIDExt = body.items.ContactIDExt,",
                "          Contact_Id = body.items.Contact_Id,",
                "          EmailAddress = body.items.EmailAddress,",
                "          EmailFormat = body.items.EmailFormat,",
                "          IsBounced = body.items.IsBounced,",
                "          IsSubscribed = body.items.IsSubscribed,",
                "          limit = body.limit,",
                "          offset = body.offset,",
                "          totalResults = body.totalResults",
                "     ),",
                "     partitionBy('hash', 1),",
                "     skipDuplicateMapInputs: false,",
                "     skipDuplicateMapOutputs: false) ~> flatten1",
                "flatten1 sink(allowSchemaDrift: true,",
                "     validateSchema: false,",
                "     partitionFileNames:[(concat('UPDATEContactEloqua13_',toString(currentDate()),toString(currentUTC())))],",
                "     umask: 0022,",
                "     preCommands: [],",
                "     postCommands: [],",
                "     skipDuplicateMapInputs: true,",
                "     skipDuplicateMapOutputs: true,",
                "     partitionBy('hash', 1)) ~> sink2"
            ]
        }
    }
}